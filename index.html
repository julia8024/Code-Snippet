<!DOCTYPE html>
<html lang="ko">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>컬러 변환기 (Hex with Alpha)</title>
	<style>
		html {
			--background-color: #f9f9f9;
			--text-color: #2C2C2C;
			--gray-text-color: #A6A6A6;
			--button-color: #2C2C2C;
			--button-txt-color: white;
			--border-color: #DADADA;
		}
		body {
			font-family: 'pretendard', sans-serif;
			background: var(--background-color);
			display: flex;
			justify-content: center;
			align-items: center;
			height: 100vh;
		}

		h1, label, input, p, span {
			color: var(--text-color);
		}

		.container {
			background: #fff;
			padding: 20px;
			border-radius: 10px;
			box-shadow: 0 6px 18px rgba(0, 0, 0, 0.1);
			width: 380px;
		}

		h1 {
			font-size: 18px;
			margin-bottom: 15px;
			text-align: center;
		}

		.input-group {
			margin-bottom: 15px;
		}

		label {
			font-size: 14px;
			font-weight: bold;
			margin-bottom: 6px;
			display: block;
		}

		input[type="color"],
		input[type="text"],
		input[type="range"] {
			width: 100%;
			padding: 8px;
			font-size: 14px;
			margin-bottom: 10px;
			box-sizing: border-box;
			outline: none;
		}

		.flex-box {
			display: flex;
			gap: 10px;
			margin-bottom: 10px;
		}

		.result-box {
			background: var(--background-color);
			padding: 10px;
			border-radius: 6px;
			font-size: 14px;
			width: 100%;
			display: flex;
			color: var(--text-color);
		}

		.preview-container {
			height: 50px;
			border-radius: 6px;
			margin-bottom: 10px;
			border: 1px solid var(--border-color);
		}

		.preview {
			width: 100%;
			height: 100%;
			border-radius: 6px;
		}

		button {
			width: fit-content;
			padding: 10px 14px;
			background: var(--button-color);
			color: var(--button-txt-color);
			font-size: 14px;
			border: none;
			border-radius: 6px;
			cursor: pointer;
			white-space: nowrap;
		}

		button:hover {
			background: #383838;
		}
	</style>
</head>

<body>
	<div class="container">
		<h1>컬러 변환기</h1>

		<!-- HEX + 투명도 입력 -->
		<div class="input-group">
			<label>HEX 입력</label>
			<input type="color" id="colorPicker" value="#2C2C2C" />
			<input type="text" id="hexInput" value="#2C2C2C" />
		</div>

		<div class="input-group">
			<label>투명도: <span id="opacityValue">40</span>%</label>
			<input type="range" id="opacityInput" min="0" max="100" value="40" />
		</div>

		<div style="margin-bottom: 30px;"></div>
		<!-- HEX8 입력 -->
		<div class="input-group">
			<label>HEX8 입력 <span style="color: var(--gray-text-color); font-weight: 400; font-size: small;">(#RRGGBBAA)</span></label>
			<input type="text" id="hex8Input" placeholder="#RRGGBBAA" />
		</div>

		<!-- 결과 -->
		<div class="preview-container">
			<div class="preview" id="preview"></div>
		</div>
		<div class="flex-box">
			<div class="result-box" id="resultHex8">HEX8: #2C2C2C66</div>
			<button onclick="copyToClipboard('resultHex8')">복사하기</button>
		</div>
		<div class="flex-box">
			<div class="result-box" id="resultRgba">RGBA: rgba(44,44,44,0.4)</div>
			<button onclick="copyToClipboard('resultRgba')">복사하기</button>
		</div>
	</div>

	<script>
		const colorPicker = document.getElementById('colorPicker');
		const hexInput = document.getElementById('hexInput');
		const opacityInput = document.getElementById('opacityInput');
		const opacityValue = document.getElementById('opacityValue');
		const hex8Input = document.getElementById('hex8Input');

		const resultHex8 = document.getElementById('resultHex8');
		const resultRgba = document.getElementById('resultRgba');
		const preview = document.getElementById('preview');

		function hexToRgb(hex) {
			hex = hex.replace('#', '');
			if (hex.length === 3) {
				hex = hex.split('').map(c => c + c).join('');
			}
			const bigint = parseInt(hex, 16);
			return {
				r: (bigint >> 16) & 255,
				g: (bigint >> 8) & 255,
				b: bigint & 255
			};
		}

		function addAlphaToHex(hex, opacity) {
			const alpha = Math.round((opacity / 100) * 255)
				.toString(16)
				.padStart(2, '0')
				.toUpperCase();
			return hex.replace('#', '#') + alpha;
		}

		function hex8ToHexAndOpacity(hex8) {
			let cleanHex = hex8.replace('#', '');
			if (cleanHex.length !== 8) return null;
			const hex = '#' + cleanHex.substring(0, 6);
			const alphaHex = cleanHex.substring(6, 8);
			const opacity = Math.round((parseInt(alphaHex, 16) / 255) * 100);
			return { hex, opacity };
		}

		function updateFromHex() {
			const hex = hexInput.value;
			const opacity = parseInt(opacityInput.value);
			const hex8 = addAlphaToHex(hex, opacity);
			const rgb = hexToRgb(hex);

			resultHex8.textContent = `HEX8: ${hex8}`;
			resultRgba.textContent = `RGBA: rgba(${rgb.r},${rgb.g},${rgb.b},${(opacity / 100).toFixed(2)})`;
			opacityValue.textContent = opacity;
			preview.style.backgroundColor = hex;
			preview.style.opacity = opacity / 100;
			hex8Input.value = hex8;
		}

		function updateFromHex8() {
			const value = hex8Input.value.trim();
			const parsed = hex8ToHexAndOpacity(value);
			if (!parsed) return;
			hexInput.value = parsed.hex;
			colorPicker.value = parsed.hex;
			opacityInput.value = parsed.opacity;
			opacityValue.textContent = parsed.opacity;
			updateFromHex();
		}

		colorPicker.addEventListener('input', e => {
			hexInput.value = e.target.value;
			updateFromHex();
		});
		hexInput.addEventListener('input', updateFromHex);
		opacityInput.addEventListener('input', updateFromHex);
		hex8Input.addEventListener('input', updateFromHex8);

		function copyToClipboard(id) {
			const text = document.getElementById(id).toString();
			navigator.clipboard.writeText(text)
				.then(() => alert('복사되었습니다!'))
				.catch(() => alert('복사 실패'));
		}

		updateFromHex();
	</script>
</body>

</html>